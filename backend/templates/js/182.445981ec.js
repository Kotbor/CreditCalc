"use strict";(globalThis["webpackChunkcalc_project"]=globalThis["webpackChunkcalc_project"]||[]).push([[182],{6182:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Te});var n=l(9835),a=l(6970);const o={class:"full-height full-width row justify-center items-center row q-pa-md shadow-4"},u={class:"col-auto"},s={class:"col-auto"},d=(0,n._)("div",{class:"text-subtitle2"},"Параметры инвестиций",-1),r={class:"row"},i={class:"col-auto"},c={class:"col-auto q-pa-md"},m={class:"row items-center justify-end"},_={class:"col-auto q-pa-md"},p={class:"col-auto q-pa-md"},v={class:"col-auto q-pa-md"},f={class:"col-auto"},h={class:"col-auto q-pa-md"},w={class:"col-auto q-pa-md"},b={class:"col-auto q-pa-md"},V={class:"col-auto q-pa-md"},x={class:"col-auto"},y={class:"col-auto q-pa-md"},W={class:"col-auto q-pa-md"},q={class:"col-auto q-pa-md"},g={class:"col-auto q-pa-md"},H={class:"col-auto q-pa-md"},U={class:"full-height full-width row justify-center items-center"},C={class:"col self-center"},k=(0,n._)("div",{class:"text-subtitle2"},"Параметры кредита",-1),Z={class:"col-auto q-pa-md"},z={class:"col-auto q-pa-md"},M={class:"col-auto q-pa-md"},P={class:"col self-center q-pl-md"},Q=(0,n._)("div",{class:"text-subtitle2"},"Результат расчетов кредита",-1),j={class:"col-auto q-pa-md"},D={class:"col-auto q-pa-md"},T={class:"col-auto q-pa-md"},Y={class:"col-auto self-center q-pa-md"},F=(0,n._)("div",{class:"text-subtitle2"},"Процент переплаты",-1),L={class:"row full-width"},I={class:"col q-pr-md"},S={class:"row q-pa-md"},E={class:"col"},K={class:"row q-pa-md"},A={class:"col"},R={class:"row q-pa-md"},B={class:"col"},O=(0,n._)("thead",{class:"bg-blue-6"},[(0,n._)("tr",null,[(0,n._)("th",{class:"text-center text-white"},"Дата"),(0,n._)("th",{class:"text-center text-white"},"Прибыль"),(0,n._)("th",{class:"text-center text-white"},"К возврату"),(0,n._)("th",{class:"text-center text-white"},"Всего вернули"),(0,n._)("th",{class:"text-center text-white"},"Наш баланс")])],-1),G={class:"text-center"},J={class:"text-center"},N={class:"text-center"},X={class:"text-center"},$={class:"text-center"},ee=(0,n._)("div",{class:"text-h6"},"Внимание",-1);function te(e,t,l,te,le,ne){const ae=(0,n.up)("q-card-section"),oe=(0,n.up)("q-btn"),ue=(0,n.up)("q-date"),se=(0,n.up)("q-popup-proxy"),de=(0,n.up)("q-icon"),re=(0,n.up)("q-input"),ie=(0,n.up)("q-toggle"),ce=(0,n.up)("q-card"),me=(0,n.up)("apexchart"),_e=(0,n.up)("CountedTable"),pe=(0,n.up)("q-markup-table"),ve=(0,n.up)("q-card-actions"),fe=(0,n.up)("q-dialog"),he=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",o,[(0,n._)("div",u,[(0,n._)("div",s,[(0,n.Wm)(ce,{class:"my-card",style:{}},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,null,{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Wm)(ae,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n._)("div",i,[(0,n._)("div",c,[(0,n.Wm)(re,{ref:"dateRef",outlined:"",modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=t=>e.date=t),hint:"Дата начала","lazy-rules":"",rules:e.daterules,dense:""},{append:(0,n.w5)((()=>[(0,n.Wm)(de,{name:"event",class:"cursor-pointer"},{default:(0,n.w5)((()=>[(0,n.Wm)(se,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=t=>e.date=t),mask:"DD.MM.YYYY"},{default:(0,n.w5)((()=>[(0,n._)("div",m,[(0,n.wy)((0,n.Wm)(oe,{label:"Закрыть",color:"primary",flat:""},null,512),[[he]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])]),(0,n._)("div",_,[(0,n.Wm)(re,{modelValue:e.total_investments,"onUpdate:modelValue":t[2]||(t[2]=t=>e.total_investments=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Всего инвестиций в объект",dense:""},null,8,["modelValue"])]),(0,n._)("div",p,[(0,n.Wm)(re,{modelValue:e.our_investments_percent,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.our_investments_percent=t),t[4]||(t[4]=t=>e.sumFromPercents(t))],modelModifiers:{number:!0},type:"number",outlined:"",hint:"Процент наших инвестиций","max-decimals":2,dense:""},null,8,["modelValue"])]),(0,n._)("div",v,[(0,n.Wm)(re,{modelValue:e.our_investments_sum,"onUpdate:modelValue":[t[5]||(t[5]=t=>e.our_investments_sum=t),t[6]||(t[6]=t=>e.percentsFromSum(t))],modelModifiers:{number:!0},type:"number",outlined:"",hint:"Сумма наших инвестиций",dense:""},null,8,["modelValue"])])]),(0,n._)("div",f,[(0,n._)("div",h,[(0,n.Wm)(re,{modelValue:e.object_profit,"onUpdate:modelValue":t[7]||(t[7]=t=>e.object_profit=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Прибыль объекта",dense:""},null,8,["modelValue"])]),(0,n._)("div",w,[(0,n.Wm)(re,{modelValue:e.profit_return_percent_while_not_inv_returned,"onUpdate:modelValue":t[8]||(t[8]=t=>e.profit_return_percent_while_not_inv_returned=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Процент с прибыли до возврата",dense:""},null,8,["modelValue"])]),(0,n._)("div",b,[(0,n.Wm)(re,{modelValue:e.profit_return_percent_after_inv_returned,"onUpdate:modelValue":t[9]||(t[9]=t=>e.profit_return_percent_after_inv_returned=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Процент с прибыли после возврата",dense:""},null,8,["modelValue"])]),(0,n._)("div",V,[(0,n.Wm)(ie,{modelValue:e.toCredit,"onUpdate:modelValue":t[10]||(t[10]=t=>e.toCredit=t),label:"Инвестиции в кредит"},null,8,["modelValue"])])]),(0,n._)("div",x,[(0,n._)("div",y,[(0,n.Wm)(re,{modelValue:e.no_profit_months,"onUpdate:modelValue":t[11]||(t[11]=t=>e.no_profit_months=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Месяцев без прибыли",dense:""},null,8,["modelValue"])]),(0,n._)("div",W,[(0,n.Wm)(re,{modelValue:e.months_after_refund,"onUpdate:modelValue":t[12]||(t[12]=t=>e.months_after_refund=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Сколько месяцев показывать после окупаемости",dense:""},null,8,["modelValue"])]),(0,n._)("div",q,[(0,n.Wm)(re,{modelValue:e.our_investments_count_sum,"onUpdate:modelValue":t[13]||(t[13]=t=>e.our_investments_count_sum=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Сумма для расчёта",dense:"",disable:"",readonly:""},null,8,["modelValue"])]),(0,n._)("div",g,[(0,n.Wm)(oe,{class:"btn btn-info full-width",onClick:e.runWhenToPlus,color:"green","no-caps":""},{default:(0,n.w5)((()=>[(0,n.Uk)("Построить график")])),_:1},8,["onClick"])])])])])),_:1})])),_:1})])]),(0,n._)("div",H,[(0,n._)("div",U,[(0,n._)("div",C,[(0,n.Wm)(ce,{class:"my-card",style:{}},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,null,{default:(0,n.w5)((()=>[k])),_:1}),(0,n.Wm)(ae,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",Z,[(0,n.Wm)(re,{modelValue:e.credit_summ,"onUpdate:modelValue":t[14]||(t[14]=t=>e.credit_summ=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Сумма кредита",dense:""},null,8,["modelValue"])]),(0,n._)("div",z,[(0,n.Wm)(re,{modelValue:e.months,"onUpdate:modelValue":t[15]||(t[15]=t=>e.months=t),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Срок кредита в месяцах",dense:""},null,8,["modelValue"])]),(0,n._)("div",M,[(0,n.Wm)(re,{modelValue:e.percent,"onUpdate:modelValue":t[16]||(t[16]=t=>e.percent=t),modelModifiers:{number:!0},type:"number",step:"0.1",outlined:"",hint:"Процентная ставка",dense:""},null,8,["modelValue"])])])),_:1})])),_:1})]),(0,n._)("div",P,[(0,n.Wm)(ce,{class:"my-card",style:{}},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,null,{default:(0,n.w5)((()=>[Q])),_:1}),(0,n.Wm)(ae,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",j,[(0,n.Wm)(re,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.monthPay,"onUpdate:modelValue":t[17]||(t[17]=t=>e.monthPay=t),hint:"Ежемесячный платеж",dense:"",readonly:""},null,8,["modelValue"])]),(0,n._)("div",D,[(0,n.Wm)(re,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.overpay,"onUpdate:modelValue":t[18]||(t[18]=t=>e.overpay=t),hint:"Переплата",dense:"",readonly:""},null,8,["modelValue"])]),(0,n._)("div",T,[(0,n.Wm)(re,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.to_return,"onUpdate:modelValue":t[19]||(t[19]=t=>e.to_return=t),hint:"Итоговая сумма к возврату",dense:"",readonly:""},null,8,["modelValue"])])])),_:1})])),_:1})]),(0,n._)("div",Y,[(0,n.Wm)(ce,{class:"my-card"},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,null,{default:(0,n.w5)((()=>[F])),_:1}),(0,n.Wm)(ae,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(me,{type:"pie",width:"370",options:e.pieoptions,series:e.pieseries},null,8,["options","series"])])])),_:1})])),_:1})])]),(0,n._)("div",L,[(0,n._)("div",I,[(0,n.Wm)(ce,{class:"my-card"},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,{class:""},{default:(0,n.w5)((()=>[(0,n._)("div",null," Возврат инвестиций через "+(0,a.zw)(e.months_to_profit)+" месяцев ",1)])),_:1})])),_:1})])])])]),(0,n._)("div",S,[(0,n._)("div",E,[(0,n.Wm)(_e,{countedList:e.counted_list},null,8,["countedList"])])]),(0,n._)("div",K,[(0,n._)("div",A,[(0,n._)("div",null,[(0,n.Wm)(me,{height:"500",type:"area",options:e.options,series:e.series,onClick:e.chartClick},null,8,["options","series","onClick"])])])]),(0,n._)("div",R,[(0,n._)("div",B,[(0,n.Wm)(pe,{dense:""},{default:(0,n.w5)((()=>[O,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.payment_list,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.number,class:(0,a.C_)(e.our_balance>0?"bg-green-1":"bg-red-1")},[(0,n._)("td",G,(0,a.zw)(e.date),1),(0,n._)("td",J,(0,a.zw)(e.profit),1),(0,n._)("td",N,(0,a.zw)(e.sum_return_this_month),1),(0,n._)("td",X,(0,a.zw)(e.returned_sum),1),(0,n._)("td",$,(0,a.zw)(e.our_balance),1)],2)))),128))])])),_:1})]),(0,n._)("div",null,[(0,n.Wm)(fe,{modelValue:e.alert,"onUpdate:modelValue":t[20]||(t[20]=t=>e.alert=t)},{default:(0,n.w5)((()=>[(0,n.Wm)(ce,null,{default:(0,n.w5)((()=>[(0,n.Wm)(ae,null,{default:(0,n.w5)((()=>[ee])),_:1}),(0,n.Wm)(ae,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Необходимо заполнить срок кредита и процентную ставку ")])),_:1}),(0,n.Wm)(ve,{align:"right"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(oe,{flat:"",label:"OK",color:"primary"},null,512),[[he]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])],64)}l(9665);var le=l(499),ne=l(7524);const ae=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{class:"text-center"},"Номер"),(0,n._)("th",{class:"text-center"},"Всего инвестиций"),(0,n._)("th",{class:"text-center"},"Процент наших инвестиций"),(0,n._)("th",{class:"text-center"},"Сумма наших инвестиций"),(0,n._)("th",{class:"text-center"},"Прибыль объекта"),(0,n._)("th",{class:"text-center"},"Процент с прибыли до возврата"),(0,n._)("th",{class:"text-center"},"Процент с прибыли после возврата"),(0,n._)("th",{class:"text-center"},"Месяцев без прибыли"),(0,n._)("th",{class:"text-center"},"Возврат инвестиций, мес"),(0,n._)("th",{class:"text-center"},"Кредит"),(0,n._)("th",{class:"text-center"},"Сумма для расчёта")])],-1),oe={class:"text-center"},ue={class:"text-center"},se={class:"text-center"},de={class:"text-center"},re={class:"text-center"},ie={class:"text-center"},ce={class:"text-center"},me={class:"text-center"},_e={class:"text-center"},pe={class:"text-center"},ve={class:"text-center"};function fe(e,t,l,o,u,s){const d=(0,n.up)("q-markup-table");return(0,n.wg)(),(0,n.j4)(d,null,{default:(0,n.w5)((()=>[ae,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.countedList,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.count_num},[(0,n._)("td",oe,(0,a.zw)(e.count_num),1),(0,n._)("td",ue,(0,a.zw)(e.total_investments),1),(0,n._)("td",se,(0,a.zw)(e.our_investments_percent),1),(0,n._)("td",de,(0,a.zw)(e.our_investments_sum),1),(0,n._)("td",re,(0,a.zw)(e.object_profit),1),(0,n._)("td",ie,(0,a.zw)(e.percent_not_returned),1),(0,n._)("td",ce,(0,a.zw)(e.percent_after_returned),1),(0,n._)("td",me,(0,a.zw)(e.no_profit_months),1),(0,n._)("td",_e,(0,a.zw)(e.months_to_profit),1),(0,n._)("td",pe,(0,a.zw)(e.credit),1),(0,n._)("td",ve,(0,a.zw)(e.our_investments_count_sum),1)])))),128))])])),_:1})}const he=(0,n.aZ)({name:"CountedTable",props:{countedList:{type:Array,required:!0}}});var we=l(1639),be=l(6933),Ve=l(9984),xe=l.n(Ve);const ye=(0,we.Z)(he,[["render",fe]]),We=ye;xe()(he,"components",{QMarkupTable:be.Z});const qe=(0,n.aZ)({name:"IndexPage",components:{CountedTable:We},setup(){var e=(0,le.iH)(1);const t=(0,le.iH)(!1),l=(0,le.iH)(),a=(0,le.iH)(60),o=(0,le.iH)(3),u=(0,le.iH)(0),s=(0,le.iH)(12),d=(0,le.iH)(!1),r=(0,le.iH)(),i=(0,le.iH)(),c=(0,le.iH)(),m=(0,le.iH)((new Date).toLocaleDateString()),_=(0,le.iH)(""),p=(0,le.iH)(),v=(0,le.iH)(),f=(0,le.iH)(),h=(0,le.iH)(),w=(0,le.iH)(),b=(0,le.iH)(),V=(0,le.iH)(),x=(0,le.iH)([]),y=(0,le.iH)(12);var W=(0,le.iH)([]);const q=(0,le.iH)({chart:{id:"payments-graph"},xaxis:{categories:[]}}),g=(0,le.iH)([]),H={labels:["Сумма кредита","Переплата"],colors:["#1E61F2","#E91E63"],legend:{position:"bottom"}},U=(0,le.iH)([0,0]),C=function(){ne.Z.post("/api/count_credit?summa="+l.value+"&percent="+s.value+"&months="+a.value).then((function(e){console.log(e),r.value=e.data.month_sum,i.value=e.data.overpay,c.value=i.value+l.value,d.value&&(h.value=c.value),U.value=[l.value,i.value]}))},k=function(){a.value&&s.value?(l.value=f.value,C()):(t.value=!0,d.value=!1)};return(0,n.YP)(d,(e=>{1==e?k():h.value=f.value})),(0,n.YP)(f,(e=>{1==d.value?k():h.value=f.value})),(0,n.YP)(s,(e=>{e&&k()})),(0,n.YP)(a,(e=>{e&&k()})),{count:e,alert:t,credit_summ:l,months:a,no_profit_months:o,months_to_profit:u,percent:s,toCredit:d,monthPay:r,overpay:i,to_return:c,total_investments:p,our_investments_percent:v,our_investments_sum:f,our_investments_count_sum:h,object_profit:w,profit_return_percent_after_inv_returned:V,profit_return_percent_while_not_inv_returned:b,date:m,payment_list:x,options:q,series:g,pieoptions:H,pieseries:U,dateRef:_,runCount:C,months_after_refund:y,counted_list:W,daterules:[e=>e.length>=8||"Введите данные"],chartClick:function(e,t,l){console.log(l),console.log(t)},runWhenToPlus:function(){ne.Z.post("/api/when_to_plus?begin="+m.value+"&total_investments="+p.value+"&our_investments="+h.value+"&object_profit="+w.value+"&profit_return_percent_while_not_inv_returned="+b.value+"&profit_return_percent_after_inv_returned="+V.value+"&months_after_refund="+y.value+"&no_profit_months="+o.value).then((function(t){x.value=t.data.details,u.value=t.data.months_to_profit;let l=x.value.map((e=>e.our_balance)),n=x.value.map((e=>e.date));W.value.push({count_num:"Расчет № "+e.value,total_investments:p.value,our_investments_sum:f.value,object_profit:w.value,percent_not_returned:b.value,percent_after_returned:V.value,no_profit_months:o.value,our_investments_percent:v.value,months_to_profit:u.value,our_investments_count_sum:h.value,credit:d.value?"Да":"Нет"}),g.value.push({name:"Расчет № "+e.value,data:l}),e.value++,q.value={chart:{id:"payments-graph"},xaxis:{categories:n}}}))},sumFromPercents:function(e){e&&(f.value=p.value*e/100)},percentsFromSum:function(e){e&&(v.value=(100*e/p.value).toFixed(2))},creditToInvest:function(){f.value=c.value,p.value||(p.value=c.value),v.value=(100*c.value/p.value).toFixed(2)}}}});var ge=l(4458),He=l(3190),Ue=l(1169),Ce=l(2857),ke=l(597),Ze=l(8123),ze=l(5157),Me=l(592),Pe=l(7743),Qe=l(1821),je=l(2146);const De=(0,we.Z)(qe,[["render",te]]),Te=De;xe()(qe,"components",{QCard:ge.Z,QCardSection:He.Z,QInput:Ue.Z,QIcon:Ce.Z,QPopupProxy:ke.Z,QDate:Ze.Z,QBtn:ze.Z,QToggle:Me.Z,QMarkupTable:be.Z,QDialog:Pe.Z,QCardActions:Qe.Z}),xe()(qe,"directives",{ClosePopup:je.Z})}}]);