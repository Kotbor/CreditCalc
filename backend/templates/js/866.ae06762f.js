"use strict";(globalThis["webpackChunkcalc_project"]=globalThis["webpackChunkcalc_project"]||[]).push([[866],{5866:(e,l,t)=>{t.r(l),t.d(l,{default:()=>X});var n=t(9835),o=t(6970);const a={class:"row"},u={class:"col"},r={class:"row shadow-2"},d={class:"col-auto q-pa-md"},s={class:"col-auto q-pa-md"},i={class:"col-auto q-pa-md"},m={class:"col-2 q-pa-md"},c={class:"row shadow-2"},_={class:"col-auto q-pa-md"},p={class:"col-auto q-pa-md"},v={class:"col-auto q-pa-md"},f={class:"col-2 q-pa-md"},h={class:"row shadow-2"},b={class:"col-auto q-pa-md"},V={class:"row items-center justify-end"},w={class:"col-auto q-pa-md"},y={class:"col-auto q-pa-md"},g={class:"col-auto q-pa-md"},W={class:"col-auto q-pa-md"},q={class:"col-auto q-pa-md"},x={class:"col-auto q-pa-md"},H={class:"col-2 q-pa-md"},k={class:"row"},U={class:"col"},C={class:"row"},M={class:"col"},P=(0,n._)("thead",{class:"bg-light-blue-3"},[(0,n._)("tr",null,[(0,n._)("th",{class:"text-center"},"Дата"),(0,n._)("th",{class:"text-center"},"Выручка"),(0,n._)("th",{class:"text-center"},"К возврату"),(0,n._)("th",{class:"text-center"},"Всего вернули"),(0,n._)("th",{class:"text-center"},"Наш баланс")])],-1),Z={class:"text-center"},j={class:"text-center"},Q={class:"text-center"},T={class:"text-center"},z={class:"text-center"};function D(e,l,t,D,F,Y){const I=(0,n.up)("q-input"),R=(0,n.up)("q-btn"),S=(0,n.up)("q-date"),B=(0,n.up)("q-popup-proxy"),K=(0,n.up)("q-icon"),A=(0,n.up)("apexchart"),E=(0,n.up)("q-markup-table"),G=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",a,[(0,n._)("div",u,[(0,n._)("div",r,[(0,n._)("div",d,[(0,n.Wm)(I,{modelValue:e.summ,"onUpdate:modelValue":l[0]||(l[0]=l=>e.summ=l),modelModifiers:{number:!0},type:"number",filled:"",hint:"Сумма",dense:""},null,8,["modelValue"])]),(0,n._)("div",s,[(0,n.Wm)(I,{modelValue:e.months,"onUpdate:modelValue":l[1]||(l[1]=l=>e.months=l),modelModifiers:{number:!0},type:"number",filled:"",hint:"Срок в месяцах",dense:""},null,8,["modelValue"])]),(0,n._)("div",i,[(0,n.Wm)(I,{modelValue:e.percent,"onUpdate:modelValue":l[2]||(l[2]=l=>e.percent=l),modelModifiers:{number:!0},type:"number",step:"0.1",filled:"",hint:"Процентная ставка",dense:""},null,8,["modelValue"])]),(0,n._)("div",m,[(0,n.Wm)(R,{class:"btn btn-info",color:"secondary",onClick:e.runCount},{default:(0,n.w5)((()=>[(0,n.Uk)("Расcчитать")])),_:1},8,["onClick"])])]),(0,n._)("div",c,[(0,n._)("div",_,[(0,n.Wm)(I,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.monthPay,"onUpdate:modelValue":l[3]||(l[3]=l=>e.monthPay=l),hint:"Ежемесячный платеж",dense:"",readonly:""},null,8,["modelValue"])]),(0,n._)("div",p,[(0,n.Wm)(I,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.overpay,"onUpdate:modelValue":l[4]||(l[4]=l=>e.overpay=l),hint:"Переплата",dense:"",readonly:""},null,8,["modelValue"])]),(0,n._)("div",v,[(0,n.Wm)(I,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.to_return,"onUpdate:modelValue":l[5]||(l[5]=l=>e.to_return=l),hint:"Итоговая сумма к возврату",dense:"",readonly:""},null,8,["modelValue"])]),(0,n._)("div",f,[(0,n.Wm)(R,{class:"btn btn-info",color:"deep-orange",onClick:e.creditToInvest},{default:(0,n.w5)((()=>[(0,n.Uk)(" Кредит В инвестиции")])),_:1},8,["onClick"])])]),(0,n._)("div",h,[(0,n._)("div",b,[(0,n.Wm)(I,{ref:"dateeRef",filled:"",modelValue:e.date,"onUpdate:modelValue":l[7]||(l[7]=l=>e.date=l),hint:"Дата начала","lazy-rules":"",rules:e.daterules,dense:""},{append:(0,n.w5)((()=>[(0,n.Wm)(K,{name:"event",class:"cursor-pointer"},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{modelValue:e.date,"onUpdate:modelValue":l[6]||(l[6]=l=>e.date=l),mask:"DD.MM.YYYY"},{default:(0,n.w5)((()=>[(0,n._)("div",V,[(0,n.wy)((0,n.Wm)(R,{label:"Закрыть",color:"primary",flat:""},null,512),[[G]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])]),(0,n._)("div",w,[(0,n.Wm)(I,{modelValue:e.total_investments,"onUpdate:modelValue":l[8]||(l[8]=l=>e.total_investments=l),modelModifiers:{number:!0},type:"number",filled:"",hint:"Всего инвестиций",dense:""},null,8,["modelValue"])]),(0,n._)("div",y,[(0,n.Wm)(I,{modelValue:e.our_investments_percent,"onUpdate:modelValue":[l[9]||(l[9]=l=>e.our_investments_percent=l),l[10]||(l[10]=l=>e.sumFromPercents(l))],modelModifiers:{number:!0},type:"number",filled:"",hint:"Процент наших инвестиций","max-decimals":2,dense:""},null,8,["modelValue"])]),(0,n._)("div",g,[(0,n.Wm)(I,{modelValue:e.our_investments_sum,"onUpdate:modelValue":[l[11]||(l[11]=l=>e.our_investments_sum=l),l[12]||(l[12]=l=>e.percentsFromSum(l))],modelModifiers:{number:!0},type:"number",filled:"",hint:"Сумма наших инвестиций",dense:""},null,8,["modelValue"])]),(0,n._)("div",W,[(0,n.Wm)(I,{modelValue:e.object_profit,"onUpdate:modelValue":l[13]||(l[13]=l=>e.object_profit=l),modelModifiers:{number:!0},type:"number",filled:"",hint:"Выручка объекта",dense:""},null,8,["modelValue"])]),(0,n._)("div",q,[(0,n.Wm)(I,{modelValue:e.profit_return_percent_while_not_inv_returned,"onUpdate:modelValue":l[14]||(l[14]=l=>e.profit_return_percent_while_not_inv_returned=l),modelModifiers:{number:!0},type:"number",filled:"",hint:"Процент с выручки до возврата",dense:""},null,8,["modelValue"])]),(0,n._)("div",x,[(0,n.Wm)(I,{modelValue:e.profit_return_percent_after_inv_returned,"onUpdate:modelValue":l[15]||(l[15]=l=>e.profit_return_percent_after_inv_returned=l),modelModifiers:{number:!0},type:"number",filled:"",hint:"Процент с выручки после возврата",dense:""},null,8,["modelValue"])]),(0,n._)("div",H,[(0,n.Wm)(R,{class:"btn btn-info",onClick:e.runWhenToPlus,color:"green"},{default:(0,n.w5)((()=>[(0,n.Uk)("Рассчитать")])),_:1},8,["onClick"])])])])]),(0,n._)("div",k,[(0,n._)("div",U,[(0,n._)("div",null,[(0,n.Wm)(A,{height:"500",type:"area",options:e.options,series:e.series},null,8,["options","series"])])])]),(0,n._)("div",C,[(0,n._)("div",M,[(0,n.Wm)(E,{dense:""},{default:(0,n.w5)((()=>[P,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.payment_list,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.number,class:(0,o.C_)(e.our_balance>0?"bg-green-1":"bg-red-1")},[(0,n._)("td",Z,(0,o.zw)(e.date),1),(0,n._)("td",j,(0,o.zw)(e.profit),1),(0,n._)("td",Q,(0,o.zw)(e.sum_return_this_month),1),(0,n._)("td",T,(0,o.zw)(e.returned_sum),1),(0,n._)("td",z,(0,o.zw)(e.our_balance),1)],2)))),128))])])),_:1})])])],64)}var F=t(499),Y=t(7524);const I=(0,n.aZ)({name:"IndexPage",setup(){const e=(0,F.iH)(0),l=(0,F.iH)(0),t=(0,F.iH)(0),n=(0,F.iH)(0),o=(0,F.iH)(0),a=(0,F.iH)(0),u=(0,F.iH)(""),r=(0,F.iH)(""),d=(0,F.iH)(0),s=(0,F.iH)(0),i=(0,F.iH)(0),m=(0,F.iH)(0),c=(0,F.iH)(0),_=(0,F.iH)(0),p=(0,F.iH)([]),v=(0,F.iH)({chart:{id:"payments-graph"},xaxis:{categories:[]}}),f=(0,F.iH)([{name:"Наш баланс",data:[]}]);return{summ:e,months:l,percent:t,monthPay:n,overpay:o,to_return:a,total_investments:d,our_investments_percent:s,our_investments_sum:i,object_profit:m,profit_return_percent_after_inv_returned:_,profit_return_percent_while_not_inv_returned:c,date:u,payment_list:p,options:v,series:f,dateRef:r,daterules:[e=>e.length>=8||"Введите данные"],runCount:function(){Y.Z.post("/count_credit?summa="+e.value+"&percent="+t.value+"&months="+l.value).then((function(l){console.log(l),n.value=l.data.month_sum,o.value=l.data.overpay,a.value=o.value+e.value}))},runWhenToPlus:function(){Y.Z.post("/when_to_plus?begin="+u.value+"&total_investments="+d.value+"&our_investments_percent="+s.value+"&object_profit="+m.value+"&profit_return_percent_while_not_inv_returned="+c.value+"&profit_return_percent_after_inv_returned="+_.value).then((function(e){console.log(e),p.value=e.data;let l=p.value.map((e=>e.our_balance)),t=p.value.map((e=>e.date));f.value=[{name:"Наш баланс",data:l}],v.value={chart:{id:"payments-graph"},xaxis:{categories:t}}}))},sumFromPercents:function(e){e&&(i.value=d.value*e/100)},percentsFromSum:function(e){e&&(s.value=(100*e/d.value).toFixed(2))},creditToInvest:function(){i.value=a.value,d.value||(d.value=a.value),s.value=(100*a.value/d.value).toFixed(2)}}}});var R=t(1639),S=t(1169),B=t(8556),K=t(2857),A=t(1189),E=t(8123),G=t(6933),J=t(2146),L=t(9984),N=t.n(L);const O=(0,R.Z)(I,[["render",D]]),X=O;N()(I,"components",{QInput:S.Z,QBtn:B.Z,QIcon:K.Z,QPopupProxy:A.Z,QDate:E.Z,QMarkupTable:G.Z}),N()(I,"directives",{ClosePopup:J.Z})}}]);