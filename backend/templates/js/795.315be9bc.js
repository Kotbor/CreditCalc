"use strict";(globalThis["webpackChunkcalc_project"]=globalThis["webpackChunkcalc_project"]||[]).push([[795],{795:(e,l,t)=>{t.r(l),t.d(l,{default:()=>be});var a=t(9835),o=t(6970);const n={class:"full-height full-width row justify-center items-center row q-pa-md shadow-4"},u={class:"col-auto"},s={class:"col-auto"},d=(0,a._)("div",{class:"text-subtitle2"},"Параметры инвестиций",-1),i={class:"row"},r={class:"col-auto"},m={class:"col-auto q-pa-md"},c={class:"row items-center justify-end"},_={class:"col-auto q-pa-md"},p={class:"col-auto q-pa-md"},v={class:"col-auto q-pa-md"},f={class:"col-auto"},h={class:"col-auto q-pa-md"},w={class:"col-auto q-pa-md"},b={class:"col-auto q-pa-md"},V={class:"col-auto q-pa-md"},y={class:"col-auto"},W={class:"col-auto q-pa-md"},q={class:"col-auto q-pa-md"},g={class:"col-auto q-pa-md"},x={class:"col-auto q-pa-md"},H={class:"col-auto q-pa-md"},U={class:"full-height full-width row justify-center items-center"},Z={class:"col self-center"},M=(0,a._)("div",{class:"text-subtitle2"},"Параметры кредита",-1),P={class:"col-auto q-pa-md"},C={class:"col-auto q-pa-md"},k={class:"col-auto q-pa-md"},Q={class:"col self-center q-pa-md"},Y=(0,a._)("div",{class:"text-subtitle2"},"Результат расчетов кредита",-1),j={class:"col-auto q-pa-md"},D={class:"col-auto q-pa-md"},z={class:"col-auto q-pa-md"},F={class:"col-auto self-center q-pa-md"},T=(0,a._)("div",{class:"text-subtitle2"},"Процент переплаты",-1),I={class:"row full-width"},S={class:"col q-pr-md"},E={class:"row q-pa-md"},K={class:"col"},R={class:"row q-pa-md"},A={class:"col"},B=(0,a._)("thead",{class:"bg-blue-6"},[(0,a._)("tr",null,[(0,a._)("th",{class:"text-center text-white"},"Дата"),(0,a._)("th",{class:"text-center text-white"},"Выручка"),(0,a._)("th",{class:"text-center text-white"},"К возврату"),(0,a._)("th",{class:"text-center text-white"},"Всего вернули"),(0,a._)("th",{class:"text-center text-white"},"Наш баланс")])],-1),L={class:"text-center"},O={class:"text-center"},G={class:"text-center"},J={class:"text-center"},N={class:"text-center"},X=(0,a._)("div",{class:"text-h6"},"Внимание",-1);function $(e,l,t,$,ee,le){const te=(0,a.up)("q-card-section"),ae=(0,a.up)("q-btn"),oe=(0,a.up)("q-date"),ne=(0,a.up)("q-popup-proxy"),ue=(0,a.up)("q-icon"),se=(0,a.up)("q-input"),de=(0,a.up)("q-toggle"),ie=(0,a.up)("q-card"),re=(0,a.up)("apexchart"),me=(0,a.up)("q-markup-table"),ce=(0,a.up)("q-card-actions"),_e=(0,a.up)("q-dialog"),pe=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",n,[(0,a._)("div",u,[(0,a._)("div",s,[(0,a.Wm)(ie,{class:"my-card",style:{}},{default:(0,a.w5)((()=>[(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[d])),_:1}),(0,a.Wm)(te,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",r,[(0,a._)("div",m,[(0,a.Wm)(se,{ref:"dateRef",outlined:"",modelValue:e.date,"onUpdate:modelValue":l[1]||(l[1]=l=>e.date=l),hint:"Дата начала","lazy-rules":"",rules:e.daterules,dense:""},{append:(0,a.w5)((()=>[(0,a.Wm)(ue,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:e.date,"onUpdate:modelValue":l[0]||(l[0]=l=>e.date=l),mask:"DD.MM.YYYY"},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.wy)((0,a.Wm)(ae,{label:"Закрыть",color:"primary",flat:""},null,512),[[pe]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])]),(0,a._)("div",_,[(0,a.Wm)(se,{modelValue:e.total_investments,"onUpdate:modelValue":l[2]||(l[2]=l=>e.total_investments=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Всего инвестиций в объект",dense:""},null,8,["modelValue"])]),(0,a._)("div",p,[(0,a.Wm)(se,{modelValue:e.our_investments_percent,"onUpdate:modelValue":[l[3]||(l[3]=l=>e.our_investments_percent=l),l[4]||(l[4]=l=>e.sumFromPercents(l))],modelModifiers:{number:!0},type:"number",outlined:"",hint:"Процент наших инвестиций","max-decimals":2,dense:""},null,8,["modelValue"])]),(0,a._)("div",v,[(0,a.Wm)(se,{modelValue:e.our_investments_sum,"onUpdate:modelValue":[l[5]||(l[5]=l=>e.our_investments_sum=l),l[6]||(l[6]=l=>e.percentsFromSum(l))],modelModifiers:{number:!0},type:"number",outlined:"",hint:"Сумма наших инвестиций",dense:""},null,8,["modelValue"])])]),(0,a._)("div",f,[(0,a._)("div",h,[(0,a.Wm)(se,{modelValue:e.object_profit,"onUpdate:modelValue":l[7]||(l[7]=l=>e.object_profit=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Выручка объекта",dense:""},null,8,["modelValue"])]),(0,a._)("div",w,[(0,a.Wm)(se,{modelValue:e.profit_return_percent_while_not_inv_returned,"onUpdate:modelValue":l[8]||(l[8]=l=>e.profit_return_percent_while_not_inv_returned=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Процент с выручки до возврата",dense:""},null,8,["modelValue"])]),(0,a._)("div",b,[(0,a.Wm)(se,{modelValue:e.profit_return_percent_after_inv_returned,"onUpdate:modelValue":l[9]||(l[9]=l=>e.profit_return_percent_after_inv_returned=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Процент с выручки после возврата",dense:""},null,8,["modelValue"])]),(0,a._)("div",V,[(0,a.Wm)(de,{modelValue:e.toCredit,"onUpdate:modelValue":l[10]||(l[10]=l=>e.toCredit=l),label:"Инвестиции в кредит"},null,8,["modelValue"])])]),(0,a._)("div",y,[(0,a._)("div",W,[(0,a.Wm)(se,{modelValue:e.no_profit_months,"onUpdate:modelValue":l[11]||(l[11]=l=>e.no_profit_months=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Месяцев без прибыли",dense:""},null,8,["modelValue"])]),(0,a._)("div",q,[(0,a.Wm)(se,{modelValue:e.months_after_refund,"onUpdate:modelValue":l[12]||(l[12]=l=>e.months_after_refund=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Сколько месяцев показывать после окупаемости",dense:""},null,8,["modelValue"])]),(0,a._)("div",g,[(0,a.Wm)(se,{modelValue:e.our_investments_count_sum,"onUpdate:modelValue":l[13]||(l[13]=l=>e.our_investments_count_sum=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Сумма для расчёта",dense:"",disable:"",readonly:""},null,8,["modelValue"])]),(0,a._)("div",x,[(0,a.Wm)(ae,{class:"btn btn-info full-width",onClick:e.runWhenToPlus,color:"green","no-caps":""},{default:(0,a.w5)((()=>[(0,a.Uk)("Построить график")])),_:1},8,["onClick"])])])])])),_:1})])),_:1})])]),(0,a._)("div",H,[(0,a._)("div",U,[(0,a._)("div",Z,[(0,a.Wm)(ie,{class:"my-card",style:{}},{default:(0,a.w5)((()=>[(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[M])),_:1}),(0,a.Wm)(te,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a._)("div",P,[(0,a.Wm)(se,{modelValue:e.credit_summ,"onUpdate:modelValue":l[14]||(l[14]=l=>e.credit_summ=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Сумма кредита",dense:""},null,8,["modelValue"])]),(0,a._)("div",C,[(0,a.Wm)(se,{modelValue:e.months,"onUpdate:modelValue":l[15]||(l[15]=l=>e.months=l),modelModifiers:{number:!0},type:"number",outlined:"",hint:"Срок кредита в месяцах",dense:""},null,8,["modelValue"])]),(0,a._)("div",k,[(0,a.Wm)(se,{modelValue:e.percent,"onUpdate:modelValue":l[16]||(l[16]=l=>e.percent=l),modelModifiers:{number:!0},type:"number",step:"0.1",outlined:"",hint:"Процентная ставка",dense:""},null,8,["modelValue"])])])),_:1})])),_:1})]),(0,a._)("div",Q,[(0,a.Wm)(ie,{class:"my-card",style:{}},{default:(0,a.w5)((()=>[(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[Y])),_:1}),(0,a.Wm)(te,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a._)("div",j,[(0,a.Wm)(se,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.monthPay,"onUpdate:modelValue":l[17]||(l[17]=l=>e.monthPay=l),hint:"Ежемесячный платеж",dense:"",readonly:""},null,8,["modelValue"])]),(0,a._)("div",D,[(0,a.Wm)(se,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.overpay,"onUpdate:modelValue":l[18]||(l[18]=l=>e.overpay=l),hint:"Переплата",dense:"",readonly:""},null,8,["modelValue"])]),(0,a._)("div",z,[(0,a.Wm)(se,{"bg-color":"green-2",ronded:"",outlined:"",modelValue:e.to_return,"onUpdate:modelValue":l[19]||(l[19]=l=>e.to_return=l),hint:"Итоговая сумма к возврату",dense:"",readonly:""},null,8,["modelValue"])])])),_:1})])),_:1})]),(0,a._)("div",F,[(0,a.Wm)(ie,{class:"my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[T])),_:1}),(0,a.Wm)(te,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(re,{type:"pie",width:"350",options:e.pieoptions,series:e.pieseries},null,8,["options","series"])])])),_:1})])),_:1})])]),(0,a._)("div",I,[(0,a._)("div",S,[(0,a.Wm)(ie,{class:"my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(te,{class:""},{default:(0,a.w5)((()=>[(0,a._)("div",null," Возврат инвестиций через "+(0,o.zw)(e.months_to_profit)+" месяцев ",1)])),_:1})])),_:1})])])])]),(0,a._)("div",E,[(0,a._)("div",K,[(0,a._)("div",null,[(0,a.Wm)(re,{height:"500",type:"area",options:e.options,series:e.series},null,8,["options","series"])])])]),(0,a._)("div",R,[(0,a._)("div",A,[(0,a.Wm)(me,{dense:""},{default:(0,a.w5)((()=>[B,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.payment_list,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.number,class:(0,o.C_)(e.our_balance>0?"bg-green-1":"bg-red-1")},[(0,a._)("td",L,(0,o.zw)(e.date),1),(0,a._)("td",O,(0,o.zw)(e.profit),1),(0,a._)("td",G,(0,o.zw)(e.sum_return_this_month),1),(0,a._)("td",J,(0,o.zw)(e.returned_sum),1),(0,a._)("td",N,(0,o.zw)(e.our_balance),1)],2)))),128))])])),_:1})]),(0,a._)("div",null,[(0,a.Wm)(_e,{modelValue:e.alert,"onUpdate:modelValue":l[20]||(l[20]=l=>e.alert=l)},{default:(0,a.w5)((()=>[(0,a.Wm)(ie,null,{default:(0,a.w5)((()=>[(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[X])),_:1}),(0,a.Wm)(te,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Необходимо заполнить срок кредита и процентную ставку ")])),_:1}),(0,a.Wm)(ce,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(ae,{flat:"",label:"OK",color:"primary"},null,512),[[pe]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])],64)}t(9665);var ee=t(499),le=t(7524);const te=(0,a.aZ)({name:"IndexPage",setup(){var e=(0,ee.iH)(1);const l=(0,ee.iH)(!1),t=(0,ee.iH)(),o=(0,ee.iH)(60),n=(0,ee.iH)(3),u=(0,ee.iH)(0),s=(0,ee.iH)(12),d=(0,ee.iH)(!1),i=(0,ee.iH)(),r=(0,ee.iH)(),m=(0,ee.iH)(),c=(0,ee.iH)((new Date).toLocaleDateString()),_=(0,ee.iH)(""),p=(0,ee.iH)(),v=(0,ee.iH)(),f=(0,ee.iH)(),h=(0,ee.iH)(),w=(0,ee.iH)(),b=(0,ee.iH)(),V=(0,ee.iH)(),y=(0,ee.iH)([]),W=(0,ee.iH)(12),q=(0,ee.iH)({chart:{id:"payments-graph"},xaxis:{categories:[]}}),g=(0,ee.iH)([]),x={labels:["Сумма кредита","Переплата"],colors:["#1E61F2","#E91E63"],legend:{position:"bottom"}},H=(0,ee.iH)([0,0]),U=function(){le.Z.post("/api/count_credit?summa="+t.value+"&percent="+s.value+"&months="+o.value).then((function(e){console.log(e),i.value=e.data.month_sum,r.value=e.data.overpay,m.value=r.value+t.value,d.value&&(h.value=m.value),H.value=[t.value,r.value]}))},Z=function(){o.value&&s.value?(t.value=f.value,U()):(l.value=!0,d.value=!1)};return(0,a.YP)(d,(e=>{1==e?Z():h.value=f.value})),(0,a.YP)(f,(e=>{1==d.value?Z():h.value=f.value})),(0,a.YP)(s,(e=>{e&&Z()})),(0,a.YP)(o,(e=>{e&&Z()})),{count:e,alert:l,credit_summ:t,months:o,no_profit_months:n,months_to_profit:u,percent:s,toCredit:d,monthPay:i,overpay:r,to_return:m,total_investments:p,our_investments_percent:v,our_investments_sum:f,our_investments_count_sum:h,object_profit:w,profit_return_percent_after_inv_returned:V,profit_return_percent_while_not_inv_returned:b,date:c,payment_list:y,options:q,series:g,pieoptions:x,pieseries:H,dateRef:_,runCount:U,months_after_refund:W,daterules:[e=>e.length>=8||"Введите данные"],runWhenToPlus:function(){le.Z.post("/api/when_to_plus?begin="+c.value+"&total_investments="+p.value+"&our_investments="+h.value+"&object_profit="+w.value+"&profit_return_percent_while_not_inv_returned="+b.value+"&profit_return_percent_after_inv_returned="+V.value+"&months_after_refund="+W.value+"&no_profit_months="+n.value).then((function(l){console.log(l),y.value=l.data.details,u.value=l.data.months_to_profit;let t=y.value.map((e=>e.our_balance)),a=y.value.map((e=>e.date));g.value.push({name:"Баланс № "+e.value,data:t}),e.value++,q.value={chart:{id:"payments-graph"},xaxis:{categories:a}}}))},sumFromPercents:function(e){e&&(f.value=p.value*e/100)},percentsFromSum:function(e){e&&(v.value=(100*e/p.value).toFixed(2))},creditToInvest:function(){f.value=m.value,p.value||(p.value=m.value),v.value=(100*m.value/p.value).toFixed(2)}}}});var ae=t(1639),oe=t(4458),ne=t(3190),ue=t(1169),se=t(2857),de=t(597),ie=t(8123),re=t(5157),me=t(592),ce=t(6933),_e=t(7743),pe=t(1821),ve=t(2146),fe=t(9984),he=t.n(fe);const we=(0,ae.Z)(te,[["render",$]]),be=we;he()(te,"components",{QCard:oe.Z,QCardSection:ne.Z,QInput:ue.Z,QIcon:se.Z,QPopupProxy:de.Z,QDate:ie.Z,QBtn:re.Z,QToggle:me.Z,QMarkupTable:ce.Z,QDialog:_e.Z,QCardActions:pe.Z}),he()(te,"directives",{ClosePopup:ve.Z})}}]);